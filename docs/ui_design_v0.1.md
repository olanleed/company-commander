# UI/UX設計思想 v0.1
## エビデンスに基づくUI原則と操作体系

---

## エビデンスに基づくUI原則

このゲームに効く原則のみ抜粋。

### 1) Fittsの法則：クリックは"短距離・大ターゲット"が速い

マウス操作の所要時間は概ね「距離が短いほど／ターゲットが大きいほど」短くなる。

**適用：**
- 頻出コマンドはカーソル近くに出す
- 当たり判定を大きくする
- 画面端・角（実質ターゲットが大きい）を活用する

### 2) Hick–Hymanの法則：選択肢が多いほど決定が遅い

選択肢が増えるほど反応時間が伸びる。

**適用：**
- コマンドは「大分類を少なく（6〜8）」
- 詳細は"必要時だけ"出す（段階的開示）

### 3) Pie Menu研究：放射状メニューは探索が速くエラーが減る

放射状（Pie）メニューは、線形メニューに比べて探索時間や誤選択が減る。

**適用：**
- RTSのように頻繁に命令を出すゲームは、右クリック長押しで出る「放射状コマンド」が相性良い

### 4) Marking Menu："同じ操作で上達する"設計

Marking menu（表示される放射状メニュー＋ジェスチャでショートカット化）は：
- 初心者はメニュー表示で迷わない
- 熟練者は表示なしの素早いジェスチャに移行

### 5) Multiple Resource理論：視覚だけに頼ると破綻する

動的タスクでは視覚チャンネルがすぐ飽和する。

**適用：**
- 重要な通知を**音（聴覚）**に逃がす

### 6) ワーキングメモリ制約："4±"の目安

人が同時に保持できる情報は4チャンク前後。

**適用：**
- 常時表示のメーター・状態は絞る
- 「いま意思決定に必要な3〜5項目」だけを前面に

---

## 入力の三層構造

入力を1系統にすると破綻する。最適は三層構造：

| 層 | 操作 | 用途 |
|----|------|------|
| **クイック命令** | 右クリック | スマート命令（最頻出） |
| **戦術命令** | 右クリック長押し | Marking/Pieメニュー（ジェスチャ対応） |
| **レア命令** | 右パネル / 検索 | Command Palette |

**効果：**
- Hickの法則で迷いを減らす
- 熟練者は高速化できる
- 初心者も覚えやすい

---

## 命令体系 v0.1

「中隊（Company）単位」を基本に、機械化だけ要素（INF/VEH）分割がある前提。

### A. 機動（Move）

| 命令 | 説明 |
|------|------|
| **Move** | 点指定で移動 |
| **Move to Area** | ドラッグで円/矩形（到達したら停止） |
| **Follow Route** | 道路ネット優先（地形仕様と連携） |
| **Halt / Hold** | その場保持（SOPへ移行） |

### B. 交戦（Engage）

| 命令 | 説明 |
|------|------|
| **Attack Target** | 目標攻撃 |
| **Attack Area** | ドラッグでエリア指定（抑圧目的の制圧射撃） |
| **Disengage / Break Contact** | 接触離脱（危険度高：誤操作防止が重要） |

### C. 防御（Defend）

| 命令 | 説明 |
|------|------|
| **Defend Point** | 位置＋**向き（扇形の射界）**をドラッグで指定 |
| **Dig-in** | 歩兵/工兵で陣地化進捗 |

### D. 偵察（Recon）

| 命令 | 説明 |
|------|------|
| **Observe** | 指定地点から索敵（姿勢＝隠密寄り） |
| **Recon Route** | 経路上を観測優先で移動（REC向け） |

### E. 持続（Sustain）

| 命令 | 説明 |
|------|------|
| **Resupply** | LOG/拠点へ（またはLOGを呼ぶ） |
| **Reorg** | 戦闘力回復の開始（時間コスト） |

### F. 姿勢（Posture）

| 命令 | 説明 |
|------|------|
| **Dispersion Mode** | Column / Deployed / Dispersed（分散は生存、集中は火力） |
| **ROE（交戦規定）** | Hold Fire / Return Fire / Free Fire |

### G. 機械化専用（Mechanized）

| 命令 | 説明 |
|------|------|
| **Dismount** | 降車（INF/VEH分離） |
| **Remount** | 再乗車（合流・再統合） |
| **Detach / Attach** | 分遣/再統合（Tetherルール付き） |

---

## 操作フロー仕様

### 1) 右クリック＝スマート命令（最頻出）

| ターゲット | 発動命令 |
|-----------|---------|
| 地面 | Move |
| 敵（CONF/SUS） | Attack（SUSは"推定地点へ制圧射撃"に自動変換可） |
| 味方LOG/補給点 | Resupply |
| 拠点 | Move＋（近傍で）Defendのプリセット提案 |

**狙い：** クリック回数と移動距離を減らす（Fitts）＋迷いを減らす（Hick）

### 2) 右クリック長押し＝Marking/Pieメニュー

**コア設計：**
- カーソル位置に **6〜8個の大分類**（Move / Engage / Defend / Recon / Sustain / Posture / Mech など）
- さらに必要なら2段目（ただし深くしない：深い階層は熟練でも遅くなる）

**操作：**
1. 長押しでメニュー表示（初心者モード）
2. そのまま方向に"フリック"して離す（選択）
3. 熟練者は「長押しせずに、素早いジェスチャ」で即発動（Marking）

**根拠：** Pieが速く誤りにくい＋Markingが初心者→熟練の移行を支える

### 3) 下部コマンドバー＝発見性（Discoverability）担当

RTSは「ショートカットが強い」一方で、覚える前に辞められがち。

**設計：**
- **6〜8個だけ固定配置**（Hickで迷いを増やさない）
- 各ボタンに**ホットキー表示**（例：M/A/D/R/Y など）
- マウスでも押せる（初心者）／キーでも押せる（熟練）

**根拠：** 「見えている＝思い出さなくて良い」（Recognition rather than recall）

### 4) 右パネル＝詳細・低頻度・危険操作の場所

**集約する内容：**
- SOP（自律行動）
- ROE
- 分散モードの詳細
- 兵站状態の詳細（Ammo/Fuel/Repair）
- 分割時のリンク状態（Tether）

**狙い：** 戦闘中に"考えるメニュー"を開かせない（SAを壊さない）

### 5) コマンドの「確認・反映」を見える化する

命令遅延があるゲームで一番ストレスになるのは「命令が通ったのか分からない」こと。

**命令の3状態：**

| 状態 | 意味 | バッジ |
|------|------|--------|
| **Queued** | 送信待ち（通信不良・遅延中） | Q |
| **Acknowledged** | 部隊が命令を受け取った | ✓ |
| **Executing** | 実際に動いている | ▶ |

**表示方法（兵科記号に合う）：**
- ユニットの右上に小バッジ（Q / ✓ / ▶）
- 命令線（intent line）の色/線種で状態差
- 重要命令のみ音でACK（視覚負荷を減らす）

**根拠：** システム状態の可視化原則

---

## 画面レイアウト（HUD）

兵科記号RTSは「地図がすべて」なので、中央の地図を最大にする。

```
┌─────────────────────────────────────────────────────┐
│ 上部: チケット │ RP │ 拠点保持状況 │ 時間          │
├──────┬──────────────────────────────────┬───────────┤
│      │                                  │           │
│ 左:  │                                  │ 右:       │
│ OB   │          中央: 地図（最大化）      │ 選択詳細  │
│ 部隊 │                                  │ Str/Sup   │
│ 一覧 │                                  │ Comm/Sus  │
│      │                                  │ Order     │
├──────┴──────────────────────────────────┴───────────┤
│ 下: コマンドバー（6〜8）＋ホットキー │ ミニマップ │ アラート │
└─────────────────────────────────────────────────────┘
```

### 左パネル（OB：部隊一覧）

**フィルタ：**
- 未命令
- 抑圧高
- 補給不足
- 通信断

### 右パネル（選択中隊/要素の詳細）

- Strength
- Suppression
- CommState
- Sustain
- Order

### 下部

- コマンドバー（6〜8）＋ツールチップ（ホットキー表示）
- ミニマップ＋アラートログ（クリックでカメラジャンプ）

**原則：** 常時表示は3〜5指標に絞る（作業記憶の制約に合わせる）

---

## 誤操作・高リスク命令の設計

"撤退"や"接触離脱"のような致命的コマンドは、確認ダイアログを出すとテンポが死ぬ。

**代替手法：**

| 手法 | 説明 |
|------|------|
| **長押しで確定** | hold-to-confirm |
| **2回入力で確定** | double-tap |
| **短時間Undo** | 3秒だけ取り消し可 |

**根拠：** エラー予防とユーザー制御・自由の両立

---

## UI評価手順

UIは理屈だけだと外すので、計測前提の改善ループを組む。

### 1) タスクを固定して計測

**例：**
- 30秒以内に「偵察→敵接触→抑圧→迂回→拠点制圧」
- 「通信断で命令遅延がある中、再編と補給を回す」

### 2) 指標（推奨2つ）

| 指標 | 用途 |
|------|------|
| **NASA-TLX** | 主観的ワークロード（"忙しすぎる"の検出に強い） |
| **SUS** | 総合的な使いやすさ（10問で回せる） |

UI変更ごとに軽く回すだけで"感想"から"改善"に変わる。
