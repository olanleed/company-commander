# UI入力 割り当て表 v0.1

---

## 設計方針

- **初心者** ＝ 右クリックだけで最低限戦える
- **熟練者** ＝ 長押しジェスチャ＋ホットキーで高速操作

---

## 1. マウス操作

中心：右クリック・カーソル周り

### 1.1 マウス割り当て表

| 入力 | 機能 | 詳細 |
|------|------|------|
| **左クリック** | 選択 | クリック＝単体選択（要素/中隊） |
| **左ドラッグ** | 範囲選択 | ボックス選択（交差方式は後で設定可） |
| **左ダブルクリック** | 同種選択 | 画面内の同一UnitType（例：戦車要素）をまとめて選択 |
| **右クリック（タップ）** | スマート命令 | 対象に応じて自動決定（スマート命令表参照） |
| **右クリック＋ドラッグ** | 移動＋向き（Facing）指定 | リリース地点＝目的地、ドラッグ方向＝向き（Defendの向きにも流用） |
| **右クリック長押し（150ms）** | 放射状コマンド（Pie/Marking） | カーソル中心に8分割。方向へスワイプして離す＝即実行 |
| **ホイール** | ズーム | 拡大縮小 |
| **中クリック** | ピン（Ping） | 味方に共有する「注目点」ピン（色：情報/警戒/目標） |
| **中ボタン押し込み＋ドラッグ** | カメラパン | 画面ドラッグで移動（手の移動量が少ない） |
| **ホイール＋（ドラッグ指定中）** | 半径/扇形の調整 | エリア指定の半径、Defend扇形角度を調整 |

### 1.2 トラックパッド対応（必須）

| 入力 | 機能 |
|------|------|
| Space＋左ドラッグ | パン |
| Alt＋左クリック | ピン（中クリックのミラー） |

---

## 2. スマート命令表

右クリック1発で"それっぽい"命令を発行。

| 右クリック対象 | 発行される命令 | 補足 |
|---------------|---------------|------|
| **地面** | Move | デフォルトは「戦術移動」（SOPにより接敵時停止/遮蔽寄り） |
| **拠点（CP）** | Move → Capture/Defend | CP内に入ると自動で占領行動、必要ならDefend姿勢へ |
| **敵（CONF）** | Engage/Attack | 指定目標へ交戦（SOPの弾種選択が効く） |
| **敵（SUS）** | Suppress Area | 推定地点への面制圧（損耗より抑圧重視） |
| **味方ユニット** | Follow/Support | 追随・支援（距離は役割で既定） |

---

## 3. 放射状コマンド（Pie/Marking）8枠 v0.1

右長押しで出る **第1階層（固定8）**。

配置は**方位固定**にして筋肉記憶を作る（例：上＝Move…のように不変）。

### 3.1 第1階層（8方向固定）

| 方向 | コマンド | ターゲット指定 |
|------|---------|---------------|
| ↑ | **Move** | 点（右ドラッグでFacing可） |
| ↗ | **Recon/Observe** | 点（到着後Observe SOP） |
| → | **Engage/Attack** | 敵（CONF）/点（強制交戦地点） |
| ↘ | **Suppress Area** | 円（ドラッグで半径） |
| ↓ | **Defend** | 点＋Facing（ドラッグ） |
| ↙ | **Support Fire** | 点/円（迫撃HEを要請 or 自部隊が迫撃なら発射） |
| ← | **Smoke** | 点/円（迫撃SMOKEの要請。自部隊が迫撃なら発射） |
| ↖ | **Break Contact** | 点（退避方向）※危険命令扱い |

### 3.2 第2階層（必要時のみ、最大6）

Support Fireの中で「HE/SMOKE/継続/短時間/線状」などを将来拡張しても、第一階層の筋肉記憶を壊さない（Hick対策）。

---

## 4. キーボード

"よく使う命令"は左手ホーム周辺に配置。

### 4.1 基本（選択・視点）

| キー | 機能 | 詳細 |
|------|------|------|
| **Space** | 選択へカメラセンター | ダブルタップ＝直近アラートへジャンプ |
| **Tab / Shift+Tab** | 選択内の巡回 | 要素を順に切替 |
| **Esc** | ターゲット指定キャンセル | "命令入力中"を確実に抜ける |
| **Ctrl+Z** | Undo | 直近命令を取り消し（3秒以内はワンキーで戻す） |

### 4.2 グループ（RTS標準：学習コストが低い）

| キー | 機能 |
|------|------|
| **1～0** | グループ選択 |
| **Ctrl+1～0** | グループ登録（上書き） |
| **Shift+1～0** | 現在選択をグループに追加 |

### 4.3 命令ホットキー（右手をマウスに固定したまま）

| キー | コマンド | ターゲット指定 |
|------|---------|---------------|
| **Q** | Move | 点/ドラッグでFacing |
| **W** | Defend | 点＋Facing |
| **E** | Engage/Attack | 敵（CONF） |
| **R** | Recon/Observe | 点 |
| **A** | Suppress Area | 円（ドラッグ半径） |
| **D** | Smoke | 点/円 |
| **F** | Support Fire（HE） | 点/円 |
| **X** | Break Contact | 点（退避方向）※危険 |
| **C** | Resupply/Reorg | 点（補給先） or 自動（最寄りLOG） |

> ホットキーは「右長押しPieの8枠」と同じ意味に揃える（混乱防止）。

---

## 5. 修飾キー（Shift/Ctrl/Alt）の意味固定

修飾キーは**どの命令でも同じ意味**にし、認知負荷を下げる（Nielsenの一貫性）。

| 修飾 | 意味（v0.1固定） | 例 |
|------|-----------------|-----|
| **Shift** | キュー（ウェイポイント） | Shift＋右クリックで命令を順に積む |
| **Ctrl** | 強制（SOP抑制） | 危険でも前進、ReturnFire無視など"命令優先" |
| **Alt** | 道路優先/慎重 | Move時はROUTEレイヤ優先（Road Move） |

---

## 6. ターゲット指定の"形"統一

命令の種類ごとに入力方法が変わると最悪なので、形は**3種類に統一**。

| 形 | 操作 | 使う命令 |
|----|------|---------|
| **点（Point）** | クリック | Move / Recon / Support Fire（点） / Smoke（点） |
| **円（Radius）** | クリック→ドラッグで半径→離す | Suppress Area / Smoke（面） / Support Fire（面） |
| **点＋向き（Facing）** | クリック→ドラッグ方向→離す | Defend / Move+Face |

### スナップ

- **Shift押下中**：向きが45°スナップ（防御正面を作りやすい）

---

## 7. 危険命令の誤操作対策

### 7.1 Break Contact（X / Pie↖）

**ホールド確定**方式：

| 対策 | 内容 |
|------|------|
| 長押し確定 | Xを0.35秒長押しで確定（またはPie選択後に"離す"で確定） |
| ロールバック | 実行後3秒以内は Ctrl+Z で取り消し可能 |
| プレビュー | 退避ルート/煙幕予定/優先遮蔽を出してから確定 |

> この一連は「誤操作防止」「自由に取り消し」を満たす。

---

## 8. 画面UIのクリック領域

Fitts的に"押しやすい"位置に配置。

### 8.1 ミニマップ

| 入力 | 機能 |
|------|------|
| 左クリック | 視点ジャンプ |
| 右ドラッグ | 視点移動（パン） |

### 8.2 コマンドバー（画面下）

- Pieと同じ**8枠**を並べる（学習・記憶を一致させる）
- ツールチップに**ホットキー表示**（認知負荷を下げる）

---

## 9. 実装メモ（v0.1で必須な"気持ち良さ"）

| 項目 | 内容 |
|------|------|
| カーソル形状変更 | 命令入力中はカーソル形状を変える（Move/Attack/Area…）＝モード可視化 |
| タップ/長押し閾値 | 右クリック（タップ）と右長押し（Pie）は**150ms閾値**で明確に分ける |
| 命令プレビュー | 必ず出す（経路線、半径円、扇形、煙幕範囲） |
| 取り消し | Ctrl+Zは対象が何であれ**共通**にする |

---

## 10. 操作体系サマリー

### 10.1 習熟レベル別の操作

| レベル | 主な操作 | 特徴 |
|--------|---------|------|
| **初心者** | 右クリック1発 | 低学習で遊べる |
| **中級者** | 右長押しMarking | カーソル周り・8択固定で速い |
| **熟練者** | ホットキー＋修飾キー | Pieと同じ意味で学習統一、迷わない |

### 10.2 安全性

| 対策 | 効果 |
|------|------|
| 危険操作＝ホールド＋Undo | 事故が減る（司令官RTSは事故が致命傷になりやすい） |

---

## 11. 早見表

### 11.1 マウス操作

| 入力 | 機能 |
|------|------|
| 左クリック | 選択 |
| 左ドラッグ | 範囲選択 |
| 左ダブルクリック | 同種選択 |
| 右クリック | スマート命令 |
| 右ドラッグ | Move＋Facing |
| 右長押し | Pie/Marking |
| ホイール | ズーム |
| 中クリック | ピン |
| 中ドラッグ | パン |

### 11.2 ホットキー

| キー | コマンド |
|------|---------|
| Q | Move |
| W | Defend |
| E | Engage/Attack |
| R | Recon/Observe |
| A | Suppress Area |
| D | Smoke |
| F | Support Fire |
| X | Break Contact |
| C | Resupply/Reorg |

### 11.3 Pie方向

```
        ↑ Move
    ↖       ↗
Break     Recon
Contact

←            → Engage
Smoke       Attack

    ↙       ↘
Support   Suppress
Fire      Area
        ↓ Defend
```

### 11.4 修飾キー

| 修飾 | 意味 |
|------|------|
| Shift | キュー |
| Ctrl | 強制 |
| Alt | 道路優先 |

### 11.5 ターゲット指定形

| 形 | 操作 |
|----|------|
| 点 | クリック |
| 円 | ドラッグ半径 |
| 点＋向き | ドラッグ方向 |
